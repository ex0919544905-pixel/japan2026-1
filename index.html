<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>2026 金澤高山 5天4夜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #222; --sub: #999; --bg: #FFFFFF; }
        body { font-family: 'Noto Sans JP', sans-serif; background-color: var(--bg); color: var(--accent); letter-spacing: -0.02em; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav-active { color: #000 !important; font-weight: 900; border-bottom: 2px solid #000; }
        .card { border-bottom: 1px solid #F0F0F0; padding: 20px 0; }
        .btn-black { background: #000; color: #fff; padding: 14px; border-radius: 8px; width: 100%; font-weight: 700; }
        input, select { border: 1px solid #DDD; border-radius: 6px; padding: 10px; width: 100%; font-size: 14px; }
    </style>
</head>
<body class="pb-20">

    <header class="p-6 pb-2 border-b">
        <h1 class="text-xl font-black">2026 KANAZAWA & TAKAYAMA</h1>
        <p class="text-[10px] text-gray-400">JAN 01 - JAN 05 | 沈 · 瑄 · YO</p>
    </header>

    <nav class="flex px-6 sticky top-0 bg-white z-50 border-b overflow-x-auto whitespace-nowrap">
        <button onclick="showTab('itinerary')" class="tab-btn nav-active py-4 mr-6 text-sm text-gray-400">SCHEDULE</button>
        <button onclick="showTab('budget')" class="tab-btn py-4 mr-6 text-sm text-gray-400">EXPENSES</button>
        <button onclick="showTab('info')" class="tab-btn py-4 text-sm text-gray-400">INFO</button>
    </nav>

    <main class="p-6">
        <section id="tab-itinerary" class="tab-content active">
            <div class="mb-10">
                <h2 class="text-2xl font-black italic mb-4">01 <span class="text-xs font-normal not-italic ml-2 text-gray-400">JAN. THU</span></h2>
                <div class="card">
                    <span class="text-[10px] font-bold text-gray-300">06:35</span>
                    <div class="font-bold">長榮航空 BR156 </div>
                    <p class="text-xs text-gray-500">桃園 → 小松 (10:25抵達) </p>
                </div>
                <div class="card">
                    <span class="text-[10px] font-bold text-gray-300">13:00</span>
                    <div class="font-bold">小松空港利木津巴士 </div>
                    <p class="text-xs text-gray-500">前往金澤站西口 (約40分) </p>
                </div>
                <div class="card">
                    <span class="text-[10px] font-bold text-gray-300">SPOT</span>
                    <div class="font-bold">高山老街散策 </div>
                    <p class="text-xs text-gray-500 mt-1">
                        星巴克高山岡本店 (限定木漆杯) <br>
                        高山布丁亭 (10:00-15:30) <br>
                        みっふいー(Miffy) おやつ堂 (09:30-17:00) 
                    </p>
                    <a href="https://www.google.com/maps/search/?api=1&query=高山老街" class="mt-3 inline-block text-[10px] border px-2 py-1 rounded">GOOGLE MAPS</a>
                </div>
            </div>

            <div class="mb-10">
                <h2 class="text-2xl font-black italic mb-4">02 <span class="text-xs font-normal not-italic ml-2 text-gray-400">JAN. FRI</span></h2>
                <div class="card">
                    <span class="text-[10px] font-bold text-gray-300">10:00</span>
                    <div class="font-bold text-red-700">金運 MZA 新年首賣 </div>
                </div>
                <div class="card">
                    <span class="text-[10px] font-bold text-gray-300">SPOT</span>
                    <div class="font-bold text-sm">金澤21世紀美術館 / 兼六園 </div>
                    <p class="text-xs text-gray-500 mt-1">
                        Le Musée de H (伴手禮 10:00-16:00) <br>
                        片町/金澤關東煮 
                    </p>
                </div>
            </div>
        </section>

        <section id="tab-budget" class="tab-content">
            <h2 class="text-lg font-black mb-6">記帳與分帳</h2>
            <div class="bg-gray-50 p-4 rounded-lg mb-6 text-sm">
                <div class="grid gap-3">
                    <input type="text" id="exp-name" placeholder="項目 (如: GU)">
                    <input type="number" id="exp-amount" placeholder="總金額 (JPY)">
                    <select id="exp-payer">
                        <option value="沈">沈 付款</option>
                        <option value="瑄">瑄 付款</option>
                        <option value="YO">YO 付款</option>
                    </select>
                    <div class="flex items-center gap-2 mt-2">
                        <input type="checkbox" id="is-custom" onchange="toggleCustom()"> 
                        <label class="text-xs font-bold">非平分 (自定義金額)</label>
                    </div>
                    <div id="custom-fields" class="hidden grid gap-2">
                        <div class="flex justify-between items-center bg-white p-2 border rounded">
                            <span class="text-xs">YO 負擔</span>
                            <input type="number" id="pay-yo" class="w-24 border-none text-right" placeholder="0">
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 border rounded">
                            <span class="text-xs">瑄 負擔</span>
                            <input type="number" id="pay-xuan" class="w-24 border-none text-right" placeholder="0">
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 border rounded">
                            <span class="text-xs">沈 負擔</span>
                            <input type="number" id="pay-shen" class="w-24 border-none text-right" placeholder="0">
                        </div>
                    </div>
                </div>
                <button onclick="saveExp()" class="btn-black mt-4">儲存紀錄</button>
            </div>

            <div id="exp-list" class="space-y-4"></div>
        </section>

        <section id="tab-info" class="tab-content">
            <div class="card">
                <div class="text-[10px] font-bold text-gray-300 uppercase">Accommodation </div>
                <div class="font-bold">SOKI KANAZAWA </div>
                <p class="text-xs text-gray-500 mt-1">石川県金沢市袋町 2-1 </p>
            </div>
            <div class="card mt-4">
                <div class="text-[10px] font-bold text-gray-300 uppercase">Emergency</div>
                <p class="text-xs font-bold">警署 110 / 救護 119</p>
                <p class="text-xs text-gray-500">駐日代表處: +81-3-3280-7917</p>
            </div>
        </section>
    </main>

    <script>
        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('nav-active'));
            document.getElementById('tab-' + id).classList.add('active');
            event.currentTarget.classList.add('nav-active');
            if(id === 'budget') renderExp();
        }

        function toggleCustom() {
            document.getElementById('custom-fields').classList.toggle('hidden', !document.getElementById('is-custom').checked);
        }

        function saveExp() {
            const name = document.getElementById('exp-name').value;
            const total = parseFloat(document.getElementById('exp-amount').value);
            const payer = document.getElementById('exp-payer').value;
            const isCustom = document.getElementById('is-custom').checked;
            
            let details = {};
            if (isCustom) {
                details = {
                    YO: parseFloat(document.getElementById('pay-yo').value || 0),
                    瑄: parseFloat(document.getElementById('pay-xuan').value || 0),
                    沈: parseFloat(document.getElementById('pay-shen').value || 0)
                };
            } else {
                const avg = (total / 3).toFixed(0);
                details = { YO: avg, 瑄: avg, 沈: avg };
            }

            const record = { name, total, payer, details, time: new Date().toLocaleString() };
            let logs = JSON.parse(localStorage.getItem('trip_logs') || '[]');
            logs.unshift(record);
            localStorage.setItem('trip_logs', JSON.stringify(logs));
            renderExp();
            alert('紀錄成功');
        }

        function renderExp() {
            const logs = JSON.parse(localStorage.getItem('trip_logs') || '[]');
            const container = document.getElementById('exp-list');
            container.innerHTML = '';
            logs.forEach(log => {
                const item = document.createElement('div');
                item.className = 'border-b pb-4';
                item.innerHTML = `
                    <div class="flex justify-between font-bold text-sm"><span>${log.name}</span><span>¥${log.total}</span></div>
                    <div class="text-[10px] text-gray-400 mt-1">${log.payer} 付款 | YO:${log.details.YO} 瑄:${log.details.瑄} 沈:${log.details.沈}</div>
                `;
                container.appendChild(item);
            });
        }
    </script>
</body>
</html>
